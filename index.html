<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fleet Service Log</title>
  <link rel="icon" type="image/jpeg" href="favicon.jpg">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body>
  <h1>Fleet Service Log</h1>
  
  <div style="text-align: center; margin: 20px auto;">
    <a href="vehicle_readiness.html" style="display: inline-block; padding: 10px 20px; background: #27ae60; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s; margin-right: 10px;">üöó Vehicle Readiness</a>
    <a href="fleet_service_charts.html" style="display: inline-block; padding: 10px 20px; background: #2980b9; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s; margin-right: 10px;">üìä View Charts</a>
    <a href="key_list.html" style="display: inline-block; padding: 10px 20px; background: #e67e22; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s; margin-right: 10px;">üîë Key List</a>
    <a href="museum_cars.html" style="display: inline-block; padding: 10px 20px; background: #8e44ad; color: white; text-decoration: none; border-radius: 6px; font-weight: 600; transition: background 0.2s;">üèõÔ∏è Museum Car Upkeep</a>
  </div>
  
  <div style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 12px 20px; margin: 20px auto; max-width: 90%; border-radius: 6px; display: flex; justify-content: space-between; align-items: center;">
    <div>
      <strong>üîê Sign in to add, edit, or delete records.</strong> View-only mode when not signed in.
    </div>
    <div>
      <button id="signInBtn" onclick="handleSignIn()" style="background: #4285f4; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: 600; display: none;">Sign In with Google</button>
      <button id="signOutBtn" onclick="handleSignOut()" style="background: #db4437; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: 600; display: none;">Sign Out</button>
    </div>
  </div>

  <!-- Summary Cards -->
  <div id="summaryCards" style="display: none; max-width: 90%; margin: 20px auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 8px;">Total Vehicles</div>
      <div id="totalVehicles" style="font-size: 2.5rem; font-weight: 700; font-family: 'Montserrat', sans-serif;">8</div>
    </div>
    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 8px;">Service Records</div>
      <div id="totalRecords" style="font-size: 2.5rem; font-weight: 700; font-family: 'Montserrat', sans-serif;">0</div>
    </div>
    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 8px;">Monthly Cost</div>
      <div id="monthlyCost" style="font-size: 2.5rem; font-weight: 700; font-family: 'Montserrat', sans-serif;">$0</div>
    </div>
    <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
      <div style="font-size: 0.9rem; opacity: 0.9; margin-bottom: 8px;">Vehicles Ready</div>
      <div id="vehiclesReady" style="font-size: 2.5rem; font-weight: 700; font-family: 'Montserrat', sans-serif;">0</div>
    </div>
  </div>
  
  <form id="serviceForm" style="display: none;">
    <div style="display: grid; grid-template-columns: auto 1fr auto 1fr; gap: 16px 20px; align-items: center;">
      <label style="text-align: right; font-weight: 500; color: #34495e;">Vehicle ID:</label>
      <div>
        <select id="vehicleIdSelect" required style="width: 100%;">
          <option value="">Select Vehicle</option>
          <option value="2023 Chevrolet Z06">2023 Chevrolet Z06</option>
          <option value="2023 Chevrolet Z51">2023 Chevrolet Z51</option>
          <option value="2023 Ford GT 500">2023 Ford GT 500</option>
          <option value="1972 Chevrolet el Camino">1972 Chevrolet el Camino</option>
          <option value="1969 Chevrolet Camaro">1969 Chevrolet Camaro</option>
          <option value="1968 Plymouth roadrunner">1968 Plymouth roadrunner</option>
          <option value="2015 Dodge Challenger">2015 Dodge Challenger</option>
          <option value="2017 Dodge Charger">2017 Dodge Charger</option>
          <option value="other">Other</option>
        </select>
        <input type="text" id="vehicleIdOther" placeholder="Enter vehicle" style="display:none; margin-top:6px; width: 100%;" />
      </div>
      <label style="text-align: right; font-weight: 500; color: #34495e;">Cost (USD):</label>
      <input type="number" id="serviceCost" step="0.01" required style="width: 100%;" />
      
      <label style="text-align: right; font-weight: 500; color: #34495e;">Service Type:</label>
      <div>
        <select id="serviceTypeSelect" required style="width: 100%;">
          <option value="">Select Service Type</option>
          <option value="Engine Oils and Filters">Engine Oils and Filters</option>
          <option value="Tires">Tires</option>
          <option value="Cosmetic">Cosmetic</option>
          <option value="other">Other</option>
        </select>
        <input type="text" id="serviceTypeOther" placeholder="Enter service type" style="display:none; margin-top:6px; width: 100%;" />
      </div>
      <label style="text-align: right; font-weight: 500; color: #34495e;">Cause:</label>
      <input type="text" id="serviceCause" required style="width: 100%;" />
      
      <label style="text-align: right; font-weight: 500; color: #34495e;">Date:</label>
      <input type="date" id="serviceDate" required style="width: 100%;" />
      <label style="text-align: right; font-weight: 500; color: #34495e;">Notes:</label>
      <input type="text" id="serviceNotes" style="width: 100%;" />
    </div>
    <div style="margin-top: 20px; text-align: center;">
      <button type="submit">Add Service</button>
    </div>
  </form>

  <div style="background: #fff; max-width: 90%; margin: 20px auto; padding: 20px 24px; border-radius: 12px; box-shadow: 0 2px 12px rgba(44,62,80,0.08);">
    <h3 style="margin-top: 0; color: #2c3e50; font-family: 'Montserrat', 'Roboto', Arial, sans-serif;">Filter Entries</h3>
    <div style="display: flex; gap: 20px; flex-wrap: wrap; align-items: flex-end;">
      <div style="flex: 1; min-width: 180px;">
        <label style="font-weight: 500; color: #34495e; margin-bottom: 6px; display: block; font-family: 'Montserrat', 'Roboto', Arial, sans-serif;">Vehicle ID:</label>
        <select id="filterVehicleId" style="font-family: 'Roboto', 'Montserrat', Arial, sans-serif; font-size: 1rem; padding: 7px 10px; border: 1px solid #bfc9d1; border-radius: 6px; background: #f7f9fa; width: 100%; transition: border-color 0.2s;">
          <option value="">All Vehicles</option>
        </select>
      </div>
      <div style="flex: 1; min-width: 140px;">
        <label style="font-weight: 500; color: #34495e; margin-bottom: 6px; display: block; font-family: 'Montserrat', 'Roboto', Arial, sans-serif;">From Date:</label>
        <input type="date" id="filterDateFrom" style="font-family: 'Roboto', 'Montserrat', Arial, sans-serif; font-size: 1rem; padding: 7px 10px; border: 1px solid #bfc9d1; border-radius: 6px; background: #f7f9fa; width: 100%; transition: border-color 0.2s;" />
      </div>
      <div style="flex: 1; min-width: 140px;">
        <label style="font-weight: 500; color: #34495e; margin-bottom: 6px; display: block; font-family: 'Montserrat', 'Roboto', Arial, sans-serif;">To Date:</label>
        <input type="date" id="filterDateTo" style="font-family: 'Roboto', 'Montserrat', Arial, sans-serif; font-size: 1rem; padding: 7px 10px; border: 1px solid #bfc9d1; border-radius: 6px; background: #f7f9fa; width: 100%; transition: border-color 0.2s;" />
      </div>
      <button id="filterBtn" style="background: #2980b9; color: #fff; border: none; cursor: pointer; font-weight: 600; padding: 7px 16px; border-radius: 6px; box-shadow: 0 1px 4px rgba(44,62,80,0.08); transition: background 0.2s; font-family: 'Montserrat', 'Roboto', Arial, sans-serif; letter-spacing: 0.5px;">Filter</button>
      <button id="clearFilterBtn" style="background: #7f8c8d; color: #fff; border: none; cursor: pointer; font-weight: 600; padding: 7px 16px; border-radius: 6px; box-shadow: 0 1px 4px rgba(44,62,80,0.08); transition: background 0.2s; font-family: 'Montserrat', 'Roboto', Arial, sans-serif; letter-spacing: 0.5px;">Clear Filter</button>
    </div>
  </div>

  <h2>Totals by Vehicle</h2>
  <table id="totalsTable">
    <thead>
      <tr>
        <th>Vehicle ID</th>
        <th>Total Cost (USD)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <table id="serviceTable">
    <thead>
      <tr>
        <th>#</th>
        <th>Vehicle ID</th>
        <th>Service Type</th>
        <th>Date</th>
        <th>Cost (USD)</th>
        <th>Cause</th>
        <th>Notes</th>
        <th>Edit</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="actions" style="display: none;">
    <button id="exportCsvBtn">Export to CSV</button>
    <input type="file" id="importCsvInput" accept=".csv" style="margin-left:16px;" />
    <button id="importCsvBtn">Import CSV</button>
    <div style="margin-top:12px; color:#34495e; font-size:0.98rem; text-align:left; font-weight:bold;">
      <span style="font-weight:bold;">Note: After exporting, move the downloaded CSV file to <br>
      <span style="font-family:monospace; font-weight:bold;">C:\Users\shawn\OneDrive\Documentos\Fleet Service Log</span>
      for safekeeping or future import.</span>
    </div>
  </div>

      <tr>
        <th>Vehicle ID</th>
        <th>Total Cost (USD)</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <script src="assets/js/fleet-service.js"></script>
  <footer style="width:100%;text-align:center;padding:24px 0 18px 0;color:#34495e;font-size:1rem;background:transparent; font-weight:bold;">
    <hr style="margin-bottom:16px;">
    <div>
      <span style="font-weight:bold;">This page is for Data use only. Records are maintained solely by the Brays Motor Museum Shop services.<br>
      (See Shawn Nicholson for any clarifications)</span>
    </div>
    <div style="margin-top:16px;">
      <a href="fleet_service_charts.html" style="color: #2980b9; text-decoration: none; font-weight: 600; margin-right: 20px;">View Cost Charts ‚Üí</a>
      <a href="museum_cars.html" style="color: #764ba2; text-decoration: none; font-weight: 600;">üèõÔ∏è Museum Car Upkeep ‚Üí</a>
    </div>
  </footer>

  <div style="text-align: center; margin-top: 40px;">
        <a href="museum_cars.html" style="color: #8e44ad; text-decoration: underline; font-weight: 600; margin-right: 20px;">Museum Car Upkeep</a>
        <a href="key_list.html" style="color: #e67e22; text-decoration: underline; font-weight: 600; margin-right: 20px;">Key List</a>
        <a href="vehicle_readiness.html" style="color: #27ae60; text-decoration: underline; font-weight: 600;">Car Readiness</a>
      </div>
</body>
</html>
